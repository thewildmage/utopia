/*
-----
UTOPIA
-----
Inspired and informed by https://utopia.fyi/
*/

:root {
    /*
    -----
    FONT SIZE
    -----
    Reference: https://utopia.fyi/type/calculator?c=600,18,1.125,1500,22,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l

    ----- Config
    These values can be changed to suit.
    Changing these works the same as using Utopia's Fluid Type Scale Calculator (https://utopia.fyi/type/calculator).

    Width and type size should be unitless here, but will later be interpreted as being in px.
    If changing units, make sure to also modify the formulas to match.
    
    Scale is unitless and remains unitless.

    Width choices inspired by:
    - David Gilbertson's "The 100% correct way to do CSS breakpoints" (https://www.freecodecamp.org/news/the-100-correct-way-to-do-css-breakpoints-88d6a5ba1862/)

    Size choices inspired by:
    - Stephen McCarthy's "Tips for creating good typography" (https://designnotes.blog.gov.uk/2015/09/16/tips-for-creating-good-typography/)
    - Tyler Sticka's "Childish Font Sizes" (https://cloudfour.com/thinks/childish-font-sizes/)
    */
    --utopia-min-viewport-width: 600;
    --utopia-min-font-size: 18;
    --utopia-min-scale: 1.125;

    --utopia-max-viewport-width: 1500;
    --utopia-max-font-size: 22;
    --utopia-max-scale: 1.25;

    /* ----- Scale
    Determine min and max for each step on scale
    */
    --size-200-min: var(--size-300-min) / var(--utopia-min-scale);
    --size-200-max: var(--size-300-max) / var(--utopia-max-scale);

    --size-300-min: var(--size-400-min) / var(--utopia-min-scale);
    --size-300-max: var(--size-400-max) / var(--utopia-max-scale);

    --size-400-min: var(--utopia-min-font-size);
    --size-400-max: var(--utopia-max-font-size);

    --size-500-min: var(--size-400-min) * var(--utopia-min-scale);
    --size-500-max: var(--size-400-max) * var(--utopia-max-scale);

    --size-600-min: var(--size-500-min) * var(--utopia-min-scale);
    --size-600-max: var(--size-500-max) * var(--utopia-max-scale);

    --size-700-min: var(--size-600-min) * var(--utopia-min-scale);
    --size-700-max: var(--size-600-max) * var(--utopia-max-scale);

    --size-800-min: var(--size-700-min) * var(--utopia-min-scale);
    --size-800-max: var(--size-700-max) * var(--utopia-max-scale);

    --size-900-min: var(--size-800-min) * var(--utopia-min-scale);
    --size-900-max: var(--size-800-max) * var(--utopia-max-scale);

    /* ----- Formulas
    y = mx + b
    y - mx = b
    b = y - mx

    x-axis = viewport width
    y-axis = font size
    use clamp's center to solve for y when x = 100vw

    m = slope = rise / run
    b = intercept
    */

    /* Run */
    --utopia-run: (var(--utopia-max-viewport-width) - var(--utopia-min-viewport-width));

    /* Slopes */
    --utopia-type-200-slope: (
        (var(--size-200-max) - var(--size-200-min)) / var(--utopia-run)
    );
    --utopia-type-300-slope: (
        (var(--size-300-max) - var(--size-300-min)) / var(--utopia-run)
    );
    --utopia-type-400-slope: (
        (var(--utopia-max-font-size) - var(--utopia-min-font-size)) / var(--utopia-run)
    );
    --utopia-type-500-slope: (
        (var(--size-500-max) - var(--size-500-min)) / var(--utopia-run)
    );
    --utopia-type-600-slope: (
        (var(--size-600-max) - var(--size-600-min)) / var(--utopia-run)
    );
    --utopia-type-700-slope: (
        (var(--size-700-max) - var(--size-700-min)) / var(--utopia-run)
    );
    --utopia-type-800-slope: (
        (var(--size-800-max) - var(--size-800-min)) / var(--utopia-run)
    );
    --utopia-type-900-slope: (
        (var(--size-900-max) - var(--size-900-min)) / var(--utopia-run)
    );

    /* Intercepts */
    --utopia-type-200-intercept: (
        var(--size-200-max) - var(--utopia-type-200-slope) *
            var(--utopia-max-viewport-width)
    );
    --utopia-type-300-intercept: (
        var(--size-300-max) - var(--utopia-type-300-slope) *
            var(--utopia-max-viewport-width)
    );
    --utopia-type-400-intercept: (
        var(--utopia-max-font-size) - var(--utopia-type-400-slope) *
            var(--utopia-max-viewport-width)
    );
    --utopia-type-500-intercept: (
        var(--size-500-max) - var(--utopia-type-500-slope) *
            var(--utopia-max-viewport-width)
    );
    --utopia-type-600-intercept: (
        var(--size-600-max) - var(--utopia-type-600-slope) *
            var(--utopia-max-viewport-width)
    );
    --utopia-type-700-intercept: (
        var(--size-700-max) - var(--utopia-type-700-slope) *
            var(--utopia-max-viewport-width)
    );
    --utopia-type-800-intercept: (
        var(--size-800-max) - var(--utopia-type-800-slope) *
            var(--utopia-max-viewport-width)
    );
    --utopia-type-900-intercept: (
        var(--size-900-max) - var(--utopia-type-900-slope) *
            var(--utopia-max-viewport-width)
    );

    /* ----- Solve
    Use clamp to set min and max and solve for the line between the two

    --size-x00 variables are the end result and what should be used in design
    */
    --size-200: clamp(
        var(--size-200-min) / 16 * 1rem,
        var(--utopia-type-200-slope) * 100vw +
            (var(--utopia-type-200-intercept) / 16 * 1rem),
        var(--size-200-max) / 16 * 1rem
    );
    --size-300: clamp(
        var(--size-300-min) / 16 * 1rem,
        var(--utopia-type-300-slope) * 100vw +
            (var(--utopia-type-300-intercept) / 16 * 1rem),
        var(--size-300-max) / 16 * 1rem
    );
    --size-400: clamp(
        var(--size-400-min) / 16 * 1rem,
        var(--utopia-type-400-slope) * 100vw +
            (var(--utopia-type-400-intercept) / 16 * 1rem),
        var(--size-400-max) / 16 * 1rem
    );
    --size-500: clamp(
        var(--size-500-min) / 16 * 1rem,
        var(--utopia-type-500-slope) * 100vw +
            (var(--utopia-type-500-intercept) / 16 * 1rem),
        var(--size-500-max) / 16 * 1rem
    );
    --size-600: clamp(
        var(--size-600-min) / 16 * 1rem,
        var(--utopia-type-600-slope) * 100vw +
            (var(--utopia-type-600-intercept) / 16 * 1rem),
        var(--size-600-max) / 16 * 1rem
    );
    --size-700: clamp(
        var(--size-700-min) / 16 * 1rem,
        var(--utopia-type-700-slope) * 100vw +
            (var(--utopia-type-700-intercept) / 16 * 1rem),
        var(--size-700-max) / 16 * 1rem
    );
    --size-800: clamp(
        var(--size-800-min) / 16 * 1rem,
        var(--utopia-type-800-slope) * 100vw +
            (var(--utopia-type-800-intercept) / 16 * 1rem),
        var(--size-800-max) / 16 * 1rem
    );
    --size-900: clamp(
        var(--size-900-min) / 16 * 1rem,
        var(--utopia-type-900-slope) * 100vw +
            (var(--utopia-type-900-intercept) / 16 * 1rem),
        var(--size-900-max) / 16 * 1rem
    );

            (var(--utopia-space-300-intercept) / 16 * 1rem),
        var(--space-300-max) / 16 * 1rem
    );

    /* 400 */
    --utopia-space-400-slope: (
        (var(--space-400-max) - var(--space-400-min)) / var(--utopia-run)
    );
    --utopia-space-400-intercept: (
        var(--space-400-max) - var(--utopia-space-400-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-400: clamp(
        var(--space-400-min) / 16 * 1rem,
        var(--utopia-space-400-slope) * 100vw +
            (var(--utopia-space-400-intercept) / 16 * 1rem),
        var(--space-400-max) / 16 * 1rem
    );

    /* 500 */
    --utopia-space-500-slope: (
        (var(--space-500-max) - var(--space-500-min)) / var(--utopia-run)
    );
    --utopia-space-500-intercept: (
        var(--space-500-max) - var(--utopia-space-500-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-500: clamp(
        var(--space-500-min) / 16 * 1rem,
        var(--utopia-space-500-slope) * 100vw +
            (var(--utopia-space-500-intercept) / 16 * 1rem),
        var(--space-500-max) / 16 * 1rem
    );

    /* 600 */
    --utopia-space-600-slope: (
        (var(--space-600-max) - var(--space-600-min)) / var(--utopia-run)
    );
    --utopia-space-600-intercept: (
        var(--space-600-max) - var(--utopia-space-600-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-600: clamp(
        var(--space-600-min) / 16 * 1rem,
        var(--utopia-space-600-slope) * 100vw +
            (var(--utopia-space-600-intercept) / 16 * 1rem),
        var(--space-600-max) / 16 * 1rem
    );

    /* 700 */
    --utopia-space-700-slope: (
        (var(--space-700-max) - var(--space-700-min)) / var(--utopia-run)
    );
    --utopia-space-700-intercept: (
        var(--space-700-max) - var(--utopia-space-700-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-700: clamp(
        var(--space-700-min) / 16 * 1rem,
        var(--utopia-space-700-slope) * 100vw +
            (var(--utopia-space-700-intercept) / 16 * 1rem),
        var(--space-700-max) / 16 * 1rem
    );

    /* 800 */
    --utopia-space-800-slope: (
        (var(--space-800-max) - var(--space-800-min)) / var(--utopia-run)
    );
    --utopia-space-800-intercept: (
        var(--space-800-max) - var(--utopia-space-800-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-800: clamp(
        var(--space-800-min) / 16 * 1rem,
        var(--utopia-space-800-slope) * 100vw +
            (var(--utopia-space-800-intercept) / 16 * 1rem),
        var(--space-800-max) / 16 * 1rem
    );

    /* 900 */
    --utopia-space-900-slope: (
        (var(--space-900-max) - var(--space-900-min)) / var(--utopia-run)
    );
    --utopia-space-900-intercept: (
        var(--space-900-max) - var(--utopia-space-900-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-900: clamp(
        var(--space-900-min) / 16 * 1rem,
        var(--utopia-space-900-slope) * 100vw +
            (var(--utopia-space-900-intercept) / 16 * 1rem),
        var(--space-900-max) / 16 * 1rem
    );

    /* One-up pairs */

    /* 100-200 */
    --utopia-space-100-200-slope: (
        (var(--space-200-max) - var(--space-100-min)) / var(--utopia-run)
    );
    --utopia-space-100-200-intercept: (
        var(--space-200-max) - var(--utopia-space-100-200-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-100-200: clamp(
        var(--space-100-min) / 16 * 1rem,
        var(--utopia-space-100-200-slope) * 100vw +
            (var(--utopia-space-100-200-intercept) / 16 * 1rem),
        var(--space-200-max) / 16 * 1rem
    );

    /* 200-300 */
    --utopia-space-200-300-slope: (
        (var(--space-300-max) - var(--space-200-min)) / var(--utopia-run)
    );
    --utopia-space-200-300-intercept: (
        var(--space-300-max) - var(--utopia-space-200-300-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-200-300: clamp(
        var(--space-200-min) / 16 * 1rem,
        var(--utopia-space-200-300-slope) * 100vw +
            (var(--utopia-space-200-300-intercept) / 16 * 1rem),
        var(--space-300-max) / 16 * 1rem
    );

    /* 300-400 */
    --utopia-space-300-400-slope: (
        (var(--space-400-max) - var(--space-300-min)) / var(--utopia-run)
    );
    --utopia-space-300-400-intercept: (
        var(--space-400-max) - var(--utopia-space-300-400-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-300-400: clamp(
        var(--space-300-min) / 16 * 1rem,
        var(--utopia-space-300-400-slope) * 100vw +
            (var(--utopia-space-300-400-intercept) / 16 * 1rem),
        var(--space-400-max) / 16 * 1rem
    );

    /* 400-500 */
    --utopia-space-400-500-slope: (
        (var(--space-500-max) - var(--space-400-min)) / var(--utopia-run)
    );
    --utopia-space-400-500-intercept: (
        var(--space-500-max) - var(--utopia-space-400-500-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-400-500: clamp(
        var(--space-400-min) / 16 * 1rem,
        var(--utopia-space-400-500-slope) * 100vw +
            (var(--utopia-space-400-500-intercept) / 16 * 1rem),
        var(--space-500-max) / 16 * 1rem
    );

    /* 500-600 */
    --utopia-space-500-600-slope: (
        (var(--space-600-max) - var(--space-500-min)) / var(--utopia-run)
    );
    --utopia-space-500-600-intercept: (
        var(--space-600-max) - var(--utopia-space-500-600-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-500-600: clamp(
        var(--space-500-min) / 16 * 1rem,
        var(--utopia-space-500-600-slope) * 100vw +
            (var(--utopia-space-500-600-intercept) / 16 * 1rem),
        var(--space-600-max) / 16 * 1rem
    );

    /* 600-700 */
    --utopia-space-600-700-slope: (
        (var(--space-700-max) - var(--space-600-min)) / var(--utopia-run)
    );
    --utopia-space-600-700-intercept: (
        var(--space-700-max) - var(--utopia-space-600-700-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-600-700: clamp(
        var(--space-600-min) / 16 * 1rem,
        var(--utopia-space-600-700-slope) * 100vw +
            (var(--utopia-space-600-700-intercept) / 16 * 1rem),
        var(--space-700-max) / 16 * 1rem
    );

    /* 700-800 */
    --utopia-space-700-800-slope: (
        (var(--space-800-max) - var(--space-700-min)) / var(--utopia-run)
    );
    --utopia-space-700-800-intercept: (
        var(--space-800-max) - var(--utopia-space-700-800-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-700-800: clamp(
        var(--space-700-min) / 16 * 1rem,
        var(--utopia-space-700-800-slope) * 100vw +
            (var(--utopia-space-700-800-intercept) / 16 * 1rem),
        var(--space-800-max) / 16 * 1rem
    );

    /* 800-900 */
    --utopia-space-800-900-slope: (
        (var(--space-900-max) - var(--space-800-min)) / var(--utopia-run)
    );
    --utopia-space-800-900-intercept: (
        var(--space-900-max) - var(--utopia-space-800-900-slope) *
            var(--utopia-max-viewport-width)
    );
    --space-800-900: clamp(
        var(--space-800-min) / 16 * 1rem,
        var(--utopia-space-800-900-slope) * 100vw +
            (var(--utopia-space-800-900-intercept) / 16 * 1rem),
        var(--space-900-max) / 16 * 1rem
    );
}
